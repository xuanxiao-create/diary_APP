<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ—¥ç¯è®°APP - æ™ºèƒ½ä»»åŠ¡ç®¡ç†ç³»ç»Ÿ</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'indigo': {
                            50: '#eef2ff',
                            100: '#e0e7ff',
                            200: '#c7d2fe',
                            300: '#a5b4fc',
                            400: '#818cf8',
                            500: '#6366f1',
                            600: '#4f46e5',
                            700: '#4338ca',
                            800: '#3730a3',
                            900: '#312e81'
                        }
                    }
                }
            }
        }
    </script>
    <style>
        * { -webkit-tap-highlight-color: transparent; }
        body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'PingFang SC', sans-serif; }
        .spinner { border: 3px solid #f3f3f3; border-top: 3px solid #6366f1; border-radius: 50%; width: 40px; height: 40px; animation: spin 1s linear infinite; }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
        .fade-in { animation: fadeIn 0.3s ease-in; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        .custom-scrollbar::-webkit-scrollbar { width: 6px; }
        .custom-scrollbar::-webkit-scrollbar-track { background: #f1f1f1; }
        .custom-scrollbar::-webkit-scrollbar-thumb { background: #888; border-radius: 3px; }
        .line-clamp-2 { display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical; overflow: hidden; }
        .gradient-bg { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); }
        .modal-overlay { backdrop-filter: blur(4px); }
    </style>
</head>
<body class="bg-gray-50">
    <!-- Navigation -->
    <nav class="bg-white shadow sticky top-0 z-40">
        <div class="max-w-7xl mx-auto px-4 h-16 flex justify-between items-center">
            <div class="flex items-center cursor-pointer" onclick="goTo('home')">
                <svg class="w-8 h-8 text-indigo-600" fill="currentColor" viewBox="0 0 20 20">
                    <path d="M3 4a1 1 0 011-1h12a1 1 0 011 1v2a1 1 0 01-1 1H4a1 1 0 01-1-1V4zM3 10a1 1 0 011-1h6a1 1 0 011 1v6a1 1 0 01-1 1H4a1 1 0 01-1-1v-6zM14 9a1 1 0 00-1 1v6a1 1 0 001 1h2a1 1 0 001-1v-6a1 1 0 00-1-1h-2z"/>
                </svg>
                <span class="ml-2 text-xl font-bold text-indigo-600 hidden sm:inline">æ—¥ç¯è®°</span>
            </div>
            <div class="hidden md:flex gap-6">
                <button onclick="goTo('home')" class="nav-link">é¦–é¡µ</button>
                <button onclick="goTo('tasks')" class="nav-link">ä»»åŠ¡</button>
                <button onclick="goTo('plans')" class="nav-link">è®¡åˆ’</button>
                <button onclick="goTo('reviews')" class="nav-link">å›é¡¾</button>
                <button onclick="goTo('stats')" class="nav-link">ç»Ÿè®¡</button>
            </div>
            <div class="flex items-center gap-2">
                <div id="user-info" class="hidden flex items-center gap-2">
                    <span id="username-display" class="text-sm text-gray-700 truncate max-w-20"></span>
                    <span id="role-badge" class="role-badge hidden"></span>
                    <button onclick="goTo('schedule')" class="px-3 py-2 text-sm bg-green-200 rounded-lg hover:bg-green-300">ä½œæ¯è¡¨</button>
                    <button onclick="goTo('categories')" class="px-3 py-2 text-sm bg-purple-200 rounded-lg hover:bg-purple-300">åˆ†ç±»</button>
                    <button onclick="goTo('admin')" id="admin-panel-btn" class="px-3 py-2 text-sm bg-yellow-200 rounded-lg hover:bg-yellow-300 hidden">ç®¡ç†</button>
                    <button onclick="logout()" class="px-3 py-2 text-sm bg-gray-200 rounded-lg hover:bg-gray-300">é€€å‡º</button>
                </div>
                <div id="auth-buttons" class="flex items-center gap-2">
                    <button onclick="createGuestAccount()" class="px-3 py-2 text-sm bg-gray-300 rounded-lg hover:bg-gray-400">æ¸¸å®¢æ¨¡å¼</button>
                    <button onclick="goTo('login')" class="px-3 py-2 text-sm bg-gray-200 rounded-lg">ç™»å½•</button>
                    <button onclick="goTo('register')" class="px-3 py-2 text-sm bg-indigo-600 text-white rounded-lg">æ³¨å†Œ</button>
                </div>
                <button onclick="toggleMobileMenu()" class="md:hidden p-2">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path id="menu-icon" strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M4 6h16M4 12h16M4 18h16"/>
                    </svg>
                </button>
            </div>
        </div>
        <div id="mobile-menu" class="md:hidden hidden py-2 space-y-1 px-4">
            <button onclick="goTo('home')" class="block w-full text-left px-4 py-2 hover:bg-gray-100 rounded">é¦–é¡µ</button>
            <button onclick="goTo('tasks')" class="block w-full text-left px-4 py-2 hover:bg-gray-100 rounded">ä»»åŠ¡</button>
            <button onclick="goTo('plans')" class="block w-full text-left px-4 py-2 hover:bg-gray-100 rounded">è®¡åˆ’</button>
            <button onclick="goTo('reviews')" class="block w-full text-left px-4 py-2 hover:bg-gray-100 rounded">å›é¡¾</button>
            <button onclick="goTo('stats')" class="block w-full text-left px-4 py-2 hover:bg-gray-100 rounded">ç»Ÿè®¡</button>
            <button onclick="goTo('schedule')" class="block w-full text-left px-4 py-2 hover:bg-gray-100 rounded">ä½œæ¯è¡¨</button>
            <button onclick="goTo('categories')" class="block w-full text-left px-4 py-2 hover:bg-gray-100 rounded">åˆ†ç±»ç®¡ç†</button>
            <button onclick="goTo('admin')" id="admin-mobile-btn" class="block w-full text-left px-4 py-2 hover:bg-gray-100 rounded hidden">ç®¡ç†å‘˜é¢æ¿</button>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="min-h-screen">
        <!-- Home Page -->
        <div id="home-page" class="hidden">
            <section class="gradient-bg text-white">
                <div class="max-w-7xl mx-auto px-4 py-20 text-center">
                    <h1 class="text-5xl font-bold mb-6">æ—¥ç¯è®°</h1>
                    <p class="text-xl mb-8 opacity-90">æ™ºèƒ½ä»»åŠ¡ç®¡ç†ï¼Œè®©æ¯ä¸€å¤©éƒ½å……æ»¡æˆå°±æ„Ÿ</p>
                    <div class="flex flex-col sm:flex-row justify-center gap-4">
                        <button onclick="goTo('tasks')" class="bg-white text-indigo-600 px-8 py-3 rounded-lg font-semibold hover:bg-gray-100 shadow-lg">ç®¡ç†ä»»åŠ¡</button>
                        <button onclick="goTo('plans')" class="bg-indigo-700 text-white px-8 py-3 rounded-lg font-semibold hover:bg-indigo-800 shadow-lg">åˆ¶å®šè®¡åˆ’</button>
                    </div>
                </div>
            </section>

            <section class="max-w-7xl mx-auto px-4 py-16">
                <div class="grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-4 gap-6">
                    <!-- ä»Šæ—¥ä»»åŠ¡ -->
                    <div class="bg-white rounded-xl shadow-lg p-6">
                        <h2 class="text-xl font-bold mb-4 flex items-center">
                            <svg class="w-5 h-5 mr-2 text-indigo-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01"/>
                            </svg>
                            ä»Šæ—¥ä»»åŠ¡
                        </h2>
                        <div id="today-tasks">
                            <p class="text-gray-500 text-center py-8">è¯·å…ˆç™»å½•æŸ¥çœ‹ä»»åŠ¡</p>
                        </div>
                    </div>

                    <!-- ä½œæ¯è¡¨ç®¡ç† -->
                    <div class="bg-white rounded-xl shadow-lg p-6">
                        <h2 class="text-xl font-bold mb-4 flex items-center">
                            <svg class="w-5 h-5 mr-2 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"/>
                            </svg>
                            ä½œæ¯è¡¨
                        </h2>
                        <div id="schedule-preview" class="space-y-2">
                            <p class="text-gray-500 text-center py-4">è¯·å…ˆç™»å½•æŸ¥çœ‹ä½œæ¯è¡¨</p>
                        </div>
                        <button onclick="goTo('schedule')" class="w-full mt-4 px-4 py-2 bg-green-100 text-green-700 rounded-lg hover:bg-green-200 transition">
                            ç®¡ç†ä½œæ¯è¡¨
                        </button>
                    </div>

                    <!-- åˆ†ç±»ç®¡ç† -->
                    <div class="bg-white rounded-xl shadow-lg p-6">
                        <h2 class="text-xl font-bold mb-4 flex items-center">
                            <svg class="w-5 h-5 mr-2 text-purple-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z"/>
                            </svg>
                            ä»»åŠ¡åˆ†ç±»
                        </h2>
                        <div id="categories-preview" class="space-y-2">
                            <p class="text-gray-500 text-center py-4">è¯·å…ˆç™»å½•æŸ¥çœ‹åˆ†ç±»</p>
                        </div>
                        <button onclick="goTo('categories')" class="w-full mt-4 px-4 py-2 bg-purple-100 text-purple-700 rounded-lg hover:bg-purple-200 transition">
                            ç®¡ç†åˆ†ç±»
                        </button>
                    </div>

                    <!-- å¿«é€Ÿæ“ä½œ -->
                    <div class="bg-white rounded-xl shadow-lg p-6">
                        <h2 class="text-xl font-bold mb-4 flex items-center">
                            <svg class="w-5 h-5 mr-2 text-orange-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M13 10V3L4 14h7v7l9-11h-7z"/>
                            </svg>
                            å¿«é€Ÿæ“ä½œ
                        </h2>
                        <div class="space-y-2">
                            <button onclick="goTo('tasks')" class="w-full p-2 text-left bg-indigo-50 hover:bg-indigo-100 rounded-lg transition text-sm">
                                <div class="font-medium text-indigo-800">æ·»åŠ ä»»åŠ¡</div>
                            </button>
                            <button onclick="goTo('plans')" class="w-full p-2 text-left bg-green-50 hover:bg-green-100 rounded-lg transition text-sm">
                                <div class="font-medium text-green-800">åˆ¶å®šè®¡åˆ’</div>
                            </button>
                            <button onclick="goTo('reviews')" class="w-full p-2 text-left bg-yellow-50 hover:bg-yellow-100 rounded-lg transition text-sm">
                                <div class="font-medium text-yellow-800">ä»Šæ—¥å›é¡¾</div>
                            </button>
                        </div>
                    </div>
                </div>
            </section>

            <!-- ä»Šæ—¥æ¦‚è§ˆ -->
            <section class="max-w-7xl mx-auto px-4 py-8">
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                    <!-- æœ¬å‘¨ç»Ÿè®¡ -->
                    <div class="bg-white rounded-xl shadow-lg p-6">
                        <h2 class="text-2xl font-bold mb-4 flex items-center">
                            <svg class="w-6 h-6 mr-2 text-indigo-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"/>
                            </svg>
                            æœ¬å‘¨ç»Ÿè®¡
                        </h2>
                        <div id="weekly-stats" class="text-center">
                            <p class="text-gray-500">è¯·å…ˆç™»å½•æŸ¥çœ‹ç»Ÿè®¡</p>
                        </div>
                    </div>

                    <!-- æœ€è¿‘æ´»åŠ¨ -->
                    <div class="bg-white rounded-xl shadow-lg p-6">
                        <h2 class="text-2xl font-bold mb-4 flex items-center">
                            <svg class="w-6 h-6 mr-2 text-indigo-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"/>
                            </svg>
                            æœ€è¿‘æ´»åŠ¨
                        </h2>
                        <div id="recent-activities" class="space-y-3">
                            <p class="text-gray-500 text-center py-8">æš‚æ— æ´»åŠ¨è®°å½•</p>
                        </div>
                    </div>
                </div>
            </section>
        </div>

        <!-- Tasks Page -->
        <div id="tasks-page" class="hidden">
            <div class="max-w-7xl mx-auto px-4 py-12">
                <div class="flex justify-between items-center mb-8">
                    <h1 class="text-4xl font-bold">ä»»åŠ¡ç®¡ç†</h1>
                    <button onclick="showTaskForm()" class="bg-indigo-600 text-white px-6 py-3 rounded-lg hover:bg-indigo-700 font-semibold">
                        + æ·»åŠ ä»»åŠ¡
                    </button>
                </div>

                <!-- è¿‡æ»¤å™¨ -->
                <div class="bg-white rounded-lg shadow p-6 mb-6">
                    <div class="flex gap-4">
                        <button onclick="setTaskFilter('all')" class="task-filter-btn active">å…¨éƒ¨</button>
                        <button onclick="setTaskFilter('pending')" class="task-filter-btn">å¾…å®Œæˆ</button>
                        <button onclick="setTaskFilter('completed')" class="task-filter-btn">å·²å®Œæˆ</button>
                        <button onclick="setTaskFilter('today')" class="task-filter-btn">ä»Šæ—¥</button>
                    </div>
                </div>

                <!-- ä»»åŠ¡åˆ—è¡¨ -->
                <div id="tasks-list" class="space-y-4">
                    <div class="bg-white rounded-lg shadow p-12 text-center">
                        <svg class="w-20 h-20 text-gray-300 mx-auto mb-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"/>
                        </svg>
                        <p class="text-gray-600 mb-4">è¯·å…ˆç™»å½•æŸ¥çœ‹ä»»åŠ¡</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Plans Page -->
        <div id="plans-page" class="hidden">
            <div class="max-w-7xl mx-auto px-4 py-12">
                <div class="flex justify-between items-center mb-8">
                    <h1 class="text-4xl font-bold">è®¡åˆ’ç®¡ç†</h1>
                    <button onclick="showPlanForm()" class="bg-green-600 text-white px-6 py-3 rounded-lg hover:bg-green-700 font-semibold">
                        + åˆ›å»ºè®¡åˆ’
                    </button>
                </div>

                <div id="plans-grid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                    <div class="col-span-full bg-white rounded-lg shadow p-12 text-center">
                        <svg class="w-20 h-20 text-gray-300 mx-auto mb-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"/>
                        </svg>
                        <p class="text-gray-600 mb-4">è¯·å…ˆç™»å½•æŸ¥çœ‹è®¡åˆ’</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Reviews Page -->
        <div id="reviews-page" class="hidden">
            <div class="max-w-7xl mx-auto px-4 py-12">
                <div class="flex justify-between items-center mb-8">
                    <h1 class="text-4xl font-bold">å›é¡¾ç®¡ç†</h1>
                    <button onclick="showReviewForm()" class="bg-yellow-600 text-white px-6 py-3 rounded-lg hover:bg-yellow-700 font-semibold">
                        + å†™å›é¡¾
                    </button>
                </div>

                <div id="reviews-list" class="space-y-6">
                    <div class="bg-white rounded-lg shadow p-12 text-center">
                        <svg class="w-20 h-20 text-gray-300 mx-auto mb-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"/>
                        </svg>
                        <p class="text-gray-600 mb-4">è¯·å…ˆç™»å½•æŸ¥çœ‹å›é¡¾</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Categories Page -->
        <div id="categories-page" class="hidden">
            <div class="max-w-7xl mx-auto px-4 py-12">
                <div class="flex justify-between items-center mb-8">
                    <h1 class="text-4xl font-bold">åˆ†ç±»ç®¡ç†</h1>
                    <button onclick="showCategoryForm()" class="bg-purple-600 text-white px-6 py-3 rounded-lg hover:bg-purple-700 font-semibold">
                        + æ·»åŠ åˆ†ç±»
                    </button>
                </div>

                <div id="categories-list" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                    <div class="col-span-full bg-white rounded-lg shadow p-12 text-center">
                        <svg class="w-20 h-20 text-gray-300 mx-auto mb-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z"/>
                        </svg>
                        <p class="text-gray-600 mb-4">è¯·å…ˆç™»å½•æŸ¥çœ‹åˆ†ç±»</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Schedule Page -->
        <div id="schedule-page" class="hidden">
            <div class="max-w-7xl mx-auto px-4 py-12">
                <div class="flex justify-between items-center mb-8">
                    <h1 class="text-4xl font-bold">ä½œæ¯è¡¨ç®¡ç†</h1>
                    <button onclick="showScheduleForm()" class="bg-green-600 text-white px-6 py-3 rounded-lg hover:bg-green-700 font-semibold">
                        + åˆ›å»ºä½œæ¯è¡¨
                    </button>
                </div>

                <div id="schedules-list" class="space-y-6">
                    <div class="bg-white rounded-lg shadow p-12 text-center">
                        <svg class="w-20 h-20 text-gray-300 mx-auto mb-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"/>
                        </svg>
                        <p class="text-gray-600 mb-4">è¯·å…ˆç™»å½•æŸ¥çœ‹ä½œæ¯è¡¨</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Admin Page -->
        <div id="admin-page" class="hidden">
            <div class="max-w-7xl mx-auto px-4 py-12">
                <h1 class="text-4xl font-bold mb-8">ç®¡ç†å‘˜é¢æ¿</h1>
                
                <div id="admin-content">
                    <!-- ç®¡ç†å‘˜å†…å®¹å°†åŠ¨æ€åŠ è½½åˆ°è¿™é‡Œ -->
                    <div class="bg-white rounded-lg shadow p-12 text-center">
                        <svg class="w-20 h-20 text-gray-300 mx-auto mb-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"/>
                        </svg>
                        <p class="text-gray-600 mb-4">è¯·å…ˆç™»å½•æŸ¥çœ‹ç®¡ç†å‘˜é¢æ¿</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Stats Page -->
        <div id="stats-page" class="hidden">
            <div class="max-w-7xl mx-auto px-4 py-12">
                <h1 class="text-4xl font-bold mb-8">æ•°æ®ç»Ÿè®¡</h1>
                
                <div id="stats-grid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
                    <div class="bg-white rounded-lg shadow p-6">
                        <div class="flex items-center justify-between">
                            <div>
                                <p class="text-sm text-gray-600">æ€»ä»»åŠ¡æ•°</p>
                                <p class="text-3xl font-bold text-indigo-600" id="total-tasks">0</p>
                            </div>
                            <svg class="w-12 h-12 text-indigo-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"/>
                            </svg>
                        </div>
                    </div>
                    
                    <div class="bg-white rounded-lg shadow p-6">
                        <div class="flex items-center justify-between">
                            <div>
                                <p class="text-sm text-gray-600">å·²å®Œæˆä»»åŠ¡</p>
                                <p class="text-3xl font-bold text-green-600" id="completed-tasks">0</p>
                            </div>
                            <svg class="w-12 h-12 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"/>
                            </svg>
                        </div>
                    </div>
                    
                    <div class="bg-white rounded-lg shadow p-6">
                        <div class="flex items-center justify-between">
                            <div>
                                <p class="text-sm text-gray-600">åˆ›å»ºè®¡åˆ’</p>
                                <p class="text-3xl font-bold text-blue-600" id="total-plans">0</p>
                            </div>
                            <svg class="w-12 h-12 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"/>
                            </svg>
                        </div>
                    </div>
                    
                    <div class="bg-white rounded-lg shadow p-6">
                        <div class="flex items-center justify-between">
                            <div>
                                <p class="text-sm text-gray-600">æ’°å†™å›é¡¾</p>
                                <p class="text-3xl font-bold text-yellow-600" id="total-reviews">0</p>
                            </div>
                            <svg class="w-12 h-12 text-yellow-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"/>
                            </svg>
                        </div>
                    </div>
                </div>
                
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                    <div class="bg-white rounded-lg shadow p-6">
                        <h2 class="text-xl font-semibold mb-4">æœ¬å‘¨å®Œæˆç‡</h2>
                        <div class="text-center">
                            <div class="text-6xl font-bold text-indigo-600 mb-4" id="weekly-completion">0%</div>
                            <div class="bg-gray-200 rounded-full h-4 mb-4">
                                <div id="weekly-progress" class="bg-indigo-600 h-4 rounded-full transition-all duration-500" style="width: 0%"></div>
                            </div>
                            <p class="text-gray-600">ç»§ç»­ä¿æŒè¿™ä¸ªèŠ‚å¥ï¼</p>
                        </div>
                    </div>
                    
                    <div class="bg-white rounded-lg shadow p-6">
                        <h2 class="text-xl font-semibold mb-4">æœ¬æœˆå®Œæˆç‡</h2>
                        <div class="text-center">
                            <div class="text-6xl font-bold text-green-600 mb-4" id="monthly-completion">0%</div>
                            <div class="bg-gray-200 rounded-full h-4 mb-4">
                                <div id="monthly-progress" class="bg-green-600 h-4 rounded-full transition-all duration-500" style="width: 0%"></div>
                            </div>
                            <p class="text-gray-600">æœˆåº¦ç›®æ ‡è¾¾æˆæƒ…å†µ</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Login Page -->
        <div id="login-page" class="hidden">
            <div class="max-w-md mx-auto px-4 py-12">
                <div class="bg-white rounded-xl shadow-lg p-8">
                    <h1 class="text-3xl font-bold text-center mb-8">ç™»å½•</h1>
                    <form onsubmit="handleLogin(event)">
                        <div class="mb-4">
                            <label class="block text-sm font-medium text-gray-700 mb-2">ç”¨æˆ·å</label>
                            <input id="login-username" type="text" required class="w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-indigo-500 focus:outline-none"/>
                        </div>
                        <div class="mb-6">
                            <label class="block text-sm font-medium text-gray-700 mb-2">å¯†ç </label>
                            <input id="login-password" type="password" required class="w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-indigo-500 focus:outline-none"/>
                        </div>
                        <button type="submit" class="w-full py-3 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 font-semibold transition">ç™»å½•</button>
                    </form>
                    <div class="mt-6 p-4 bg-indigo-50 rounded-lg">
                        <p class="text-sm text-gray-700 mb-2 font-medium">æµ‹è¯•è´¦å·ï¼š</p>
                        <p class="text-xs text-gray-600 mb-1">æ™®é€šç”¨æˆ·: demo / 123456</p>
                        <p class="text-xs text-gray-600 mb-1">ç®¡ç†å‘˜: admin / admin123</p>
                        <p class="text-xs text-gray-600 mb-2">âš ï¸ æ³¨æ„ï¼šç®¡ç†å‘˜å¯†ç æ˜¯ admin123ï¼Œä¸æ˜¯ 123456</p>
                        <p class="text-xs text-gray-600">æˆ–æ³¨å†Œæ–°è´¦å·ä½“éªŒå®Œæ•´åŠŸèƒ½</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Register Page -->
        <div id="register-page" class="hidden">
            <div class="max-w-md mx-auto px-4 py-12">
                <div class="bg-white rounded-xl shadow-lg p-8">
                    <h1 class="text-3xl font-bold text-center mb-8">æ³¨å†Œ</h1>
                    <form onsubmit="handleRegister(event)">
                        <div class="mb-4">
                            <label class="block text-sm font-medium text-gray-700 mb-2">ç”¨æˆ·å</label>
                            <input id="register-username" type="text" required class="w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-indigo-500 focus:outline-none"/>
                        </div>
                        <div class="mb-4">
                            <label class="block text-sm font-medium text-gray-700 mb-2">é‚®ç®±</label>
                            <input id="register-email" type="email" required class="w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-indigo-500 focus:outline-none"/>
                        </div>
                        <div class="mb-6">
                            <label class="block text-sm font-medium text-gray-700 mb-2">å¯†ç </label>
                            <input id="register-password" type="password" required minLength="6" class="w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-indigo-500 focus:outline-none"/>
                        </div>
                        <button type="submit" class="w-full py-3 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 font-semibold transition">æ³¨å†Œ</button>
                    </form>
                </div>
            </div>
        </div>
    </main>

    <!-- Loading Overlay -->
    <div id="loading-overlay" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden">
        <div class="bg-white rounded-lg p-6">
            <div class="spinner mb-4"></div>
            <p>åŠ è½½ä¸­...</p>
        </div>
    </div>

    <!-- Toast Notifications -->
    <div id="toast-container" class="fixed bottom-4 right-4 z-50"></div>

    <!-- Modals -->
    <!-- Task Form Modal -->
    <div id="task-modal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden modal-overlay">
        <div class="bg-white rounded-lg p-6 max-w-md w-full mx-4">
            <h3 id="task-modal-title" class="text-xl font-semibold mb-4">æ·»åŠ ä»»åŠ¡</h3>
            <div class="space-y-4">
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">ä»»åŠ¡æ ‡é¢˜ *</label>
                    <input id="task-title" type="text" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500" placeholder="è¾“å…¥ä»»åŠ¡æ ‡é¢˜"/>
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">ä»»åŠ¡æè¿°</label>
                    <textarea id="task-description" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500" rows="3" placeholder="è¾“å…¥ä»»åŠ¡æè¿°ï¼ˆå¯é€‰ï¼‰"></textarea>
                </div>
                <div class="grid grid-cols-2 gap-4">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">ä¼˜å…ˆçº§</label>
                        <select id="task-priority" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500">
                            <option value="low">ä½</option>
                            <option value="medium">ä¸­</option>
                            <option value="high">é«˜</option>
                        </select>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">åˆ†ç±»</label>
                        <select id="task-category" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500">
                            <!-- åˆ†ç±»é€‰é¡¹å°†é€šè¿‡JavaScriptåŠ¨æ€å¡«å…… -->
                        </select>
                    </div>
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">æˆªæ­¢æ—¥æœŸ</label>
                    <input id="task-due-date" type="date" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"/>
                </div>
                <div class="grid grid-cols-2 gap-4">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">å¼€å§‹æ—¶é—´</label>
                        <input id="task-start-time" type="time" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"/>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">ç»“æŸæ—¶é—´</label>
                        <input id="task-end-time" type="time" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"/>
                    </div>
                </div>
            </div>
            <div class="flex justify-end gap-3 mt-6">
                <button onclick="hideTaskForm()" class="px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50">å–æ¶ˆ</button>
                <button onclick="saveTask()" class="px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700" id="task-save-btn">æ·»åŠ </button>
            </div>
        </div>
    </div>

    <!-- Plan Form Modal -->
    <div id="plan-modal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden modal-overlay">
        <div class="bg-white rounded-lg p-6 max-w-md w-full mx-4">
            <h3 class="text-xl font-semibold mb-4">åˆ›å»ºè®¡åˆ’</h3>
            <div class="space-y-4">
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">è®¡åˆ’æ ‡é¢˜ *</label>
                    <input id="plan-title" type="text" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500" placeholder="è¾“å…¥è®¡åˆ’æ ‡é¢˜"/>
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">è®¡åˆ’æè¿°</label>
                    <textarea id="plan-description" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500" rows="3" placeholder="è¾“å…¥è®¡åˆ’æè¿°ï¼ˆå¯é€‰ï¼‰"></textarea>
                </div>
                <div class="grid grid-cols-2 gap-4">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">è®¡åˆ’æ—¥æœŸ</label>
                        <input id="plan-date" type="date" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500"/>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">è®¡åˆ’ç±»å‹</label>
                        <select id="plan-type" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500">
                            <option value="daily">æ—¥è®¡åˆ’</option>
                            <option value="weekly">å‘¨è®¡åˆ’</option>
                            <option value="monthly">æœˆè®¡åˆ’</option>
                        </select>
                    </div>
                </div>
            </div>
            <div class="flex justify-end gap-3 mt-6">
                <button onclick="hidePlanForm()" class="px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50">å–æ¶ˆ</button>
                <button onclick="savePlan()" class="px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700">åˆ›å»º</button>
            </div>
        </div>
    </div>

    <!-- Review Form Modal -->
    <div id="review-modal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden modal-overlay">
        <div class="bg-white rounded-lg p-6 max-w-lg w-full mx-4 max-h-[90vh] overflow-y-auto">
            <h3 class="text-xl font-semibold mb-4">å†™å›é¡¾</h3>
            <div class="space-y-4">
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">å›é¡¾æ—¥æœŸ *</label>
                    <input id="review-date" type="date" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-yellow-500 focus:border-yellow-500"/>
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">ä»Šæ—¥å¿ƒæƒ…</label>
                    <select id="review-mood" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-yellow-500 focus:border-yellow-500">
                        <option value="excellent">ğŸ˜„ éå¸¸æ£’</option>
                        <option value="good">ğŸ˜Š ä¸é”™</option>
                        <option value="normal">ğŸ˜ ä¸€èˆ¬</option>
                        <option value="bad">ğŸ˜” ä¸å¤ªå¥½</option>
                        <option value="terrible">ğŸ˜¢ å¾ˆç³Ÿç³•</option>
                    </select>
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">ä»Šæ—¥æ€»ç»“ *</label>
                    <textarea id="review-content" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-yellow-500 focus:border-yellow-500" rows="4" placeholder="æ€»ç»“ä»Šå¤©çš„å·¥ä½œå’Œç”Ÿæ´»..."></textarea>
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">ä»Šæ—¥æˆå°±</label>
                    <textarea id="review-achievements" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-yellow-500 focus:border-yellow-500" rows="3" placeholder="è®°å½•ä»Šå¤©çš„æˆå°±å’Œè¿›æ­¥..."></textarea>
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">æ”¹è¿›ç©ºé—´</label>
                    <textarea id="review-improvements" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-yellow-500 focus:border-yellow-500" rows="3" placeholder="æ€è€ƒå¯ä»¥æ”¹è¿›çš„åœ°æ–¹..."></textarea>
                </div>
            </div>
            <div class="flex justify-end gap-3 mt-6">
                <button onclick="hideReviewForm()" class="px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50">å–æ¶ˆ</button>
                <button onclick="saveReview()" class="px-4 py-2 bg-yellow-600 text-white rounded-lg hover:bg-yellow-700">ä¿å­˜</button>
            </div>
        </div>
    </div>

    <!-- Category Form Modal -->
    <div id="category-modal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden modal-overlay">
        <div class="bg-white rounded-lg p-6 max-w-lg w-full mx-4 max-h-[90vh] overflow-y-auto">
            <h3 class="text-xl font-semibold mb-4" id="category-modal-title">æ·»åŠ åˆ†ç±»</h3>
            <div class="space-y-4">
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">åˆ†ç±»åç§° *</label>
                    <input id="category-name" type="text" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500" placeholder="è¾“å…¥åˆ†ç±»åç§°"/>
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">åˆ†ç±»å›¾æ ‡</label>
                    <input id="category-icon" type="text" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500" placeholder="è¾“å…¥emojiå›¾æ ‡ï¼Œå¦‚ğŸ“š"/>
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">åˆ†ç±»é¢œè‰²</label>
                    <input id="category-color" type="color" class="w-full h-12 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500" value="#8B5CF6"/>
                </div>
            </div>
            <div class="flex justify-end gap-3 mt-6">
                <button onclick="hideCategoryForm()" class="px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50">å–æ¶ˆ</button>
                <button onclick="saveCategory()" class="px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700">ä¿å­˜</button>
            </div>
        </div>
    </div>

    <!-- Schedule Form Modal -->
    <div id="schedule-modal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden modal-overlay">
        <div class="bg-white rounded-lg p-6 max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto">
            <h3 class="text-xl font-semibold mb-4" id="schedule-modal-title">åˆ›å»ºä½œæ¯è¡¨</h3>
            <div class="space-y-4">
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">ä½œæ¯è¡¨åç§° *</label>
                    <input id="schedule-name" type="text" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500" placeholder="è¾“å…¥ä½œæ¯è¡¨åç§°"/>
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">æ—¶é—´æ®µè®¾ç½®</label>
                    <div id="schedule-slots" class="space-y-3">
                        <!-- æ—¶é—´æ®µå°†åŠ¨æ€æ·»åŠ åˆ°è¿™é‡Œ -->
                    </div>
                    <button onclick="addScheduleSlot()" class="mt-3 px-4 py-2 text-sm bg-green-100 text-green-700 rounded-lg hover:bg-green-200">+ æ·»åŠ æ—¶é—´æ®µ</button>
                </div>
            </div>
            <div class="flex justify-end gap-3 mt-6">
                <button onclick="hideScheduleForm()" class="px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50">å–æ¶ˆ</button>
                <button onclick="saveSchedule()" class="px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700">ä¿å­˜</button>
            </div>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>